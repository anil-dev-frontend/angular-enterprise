<div class="container d-flex justify-content-center mt-5 mb-5">
    <div class="card signup-card">

        <!--TAB SWITCH -->
        <div class="auth-tabs pt-3">
            <div class="tab-container">
                <div class="tab" [class.active]="activeTab === 'login'" (click)="goToLogin()">Login</div>
                <div class="tab" [class.active]="activeTab === 'signup'" (click)="goToSignup()">Sign Up</div>
            </div>
        </div>

        <div class="card-body">
            <h3 class="text-center mb-4">User Sign Up</h3>

            <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">

                <!-- Full Name -->
                <div class="mb-3">
                    <label class="form-label">Full Name</label>

                    <input type="text" class="form-control" formControlName="fullName" placeholder="Enter full name"
                        [ngClass]="{'is-invalid': f['fullName'].invalid && f['fullName'].touched}" />

                    @if (f['fullName'].invalid && f['fullName'].touched) {
                    <div class="invalid-feedback">
                        Full Name is required
                    </div>
                    }
                </div>

                <!-- Email -->
                <div class="mb-3">
                    <label class="form-label">Email</label>

                    <input type="email" class="form-control" formControlName="emailId" placeholder="Enter email"
                        [ngClass]="{'is-invalid': f['emailId'].invalid && f['emailId'].touched}" />

                    @if (f['emailId'].invalid && f['emailId'].touched) {
                    <div class="invalid-feedback">
                        @if (f['emailId'].errors?.['required']) {
                        Email is required
                        }
                        @if (f['emailId'].errors?.['emailId']) {
                        Enter a valid email
                        }
                    </div>
                    }
                </div>

                <!-- Password -->
                <div class="mb-3">
                    <label class="form-label">Password</label>

                    <div class="input-group">
                        <input [type]="showPassword ? 'text' : 'password'" class="form-control"
                            formControlName="password" placeholder="Enter password"
                            [ngClass]="{'is-invalid': f['password'].touched && f['password'].invalid}" />

                        <!-- Eye icon only -->
                        <button type="button" class="btn btn-outline-secondary" (click)="togglePassword()"
                            tabindex="-1">
                            <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                        </button>
                    </div>

                    @if (f['password'].touched && f['password'].errors?.['required']) {
                    <div class="invalid-feedback d-block">
                        Password is required
                    </div>
                    }

                    @if (f['password'].touched && f['password'].errors?.['minlength']) {
                    <div class="invalid-feedback d-block">
                        Minimum 6 characters required
                    </div>
                    }
                </div>

                <!-- Confirm Password -->
                <div class="mb-4">
                    <label class="form-label">Confirm Password</label>

                    <div class="input-group">
                        <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control"
                            formControlName="confirmPassword" placeholder="Confirm password"
                            [ngClass]="{'is-invalid':f['confirmPassword'].touched &&(f['confirmPassword'].errors?.['required'] ||f['confirmPassword'].errors?.['passwordMismatch'])}" />

                        <!-- Eye icon only -->
                        <button type="button" class="btn btn-outline-secondary" (click)="toggleConfirmPassword()"
                            tabindex="-1">
                            <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                        </button>
                    </div>

                    @if (f['confirmPassword'].touched && f['confirmPassword'].errors?.['required']) {
                    <div class="invalid-feedback d-block">
                        Confirm password is required
                    </div>
                    }

                    @if (f['confirmPassword'].touched && f['confirmPassword'].errors?.['passwordMismatch']) {
                    <div class="invalid-feedback d-block">
                        Password and Confirm Password do not match
                    </div>
                    }
                </div>


                <button type="submit" class="btn  w-100 btncolor">
                    Sign Up
                </button>
                <p class="text-center mt-3">
                    Already have an account?
                    <a routerLink="/login" class="fw-semibold text-decoration-none" style="cursor:pointer">
                        Login
                    </a>
                </p>

            </form>
        </div>
    </div>
</div>